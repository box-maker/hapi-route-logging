{"version":3,"sources":["../src/route-list.js"],"names":["getRouteList","server","list","tables","table","forEach","routesTable","element","routeDescription","settings","description","err","push","method","toUpperCase","path","id","info","uri","labels","routes","formatRoutes","listRoutes","route","columns","showHeaders","columnSplitter","config","align","dataTransform","data","green","yellow","headingTransform","heading","blue","bold","console","log","underline","cyan","gray"],"mappings":";;;;;;;AAAA;;;;AACA;;;;;;AAEA;;AAEA,SAASA,YAAT,CAAsBC,MAAtB,EAA8B;AAC5B,QAAMC,OAAO,EAAb;AACA,QAAMC,SAASF,OAAOG,KAAP,EAAf;AACAD,SAAOE,OAAP,CAAeD,SAAS;AACtB,UAAME,cAAc,EAApB;AACAF,UAAMA,KAAN,CAAYC,OAAZ,CAAoBE,WAAW;AAC7B;AACA,UAAIC,gBAAJ;AACA,UAAI;AACFA,2BAAmBD,QAAQE,QAAR,CAAiBC,WAApC;AACD,OAFD,CAEE,OAAOC,GAAP,EAAY;AACZH,2BAAmB,EAAnB;AACD;AACDF,kBAAYM,IAAZ,CAAiB;AACfC,gBAAQN,QAAQM,MAAR,CAAeC,WAAf,EADO;AAEfC,cAAMR,QAAQQ,IAFC;AAGfL,qBAAaF;AAHE,OAAjB;AAKD,KAbD,EAaG,IAbH;AAcAN,SAAKU,IAAL,CAAU;AACRI,UAAIZ,MAAMa,IAAN,CAAWD,EADP;AAERE,WAAKd,MAAMa,IAAN,CAAWC,GAFR;AAGRC,cAAQf,MAAMe,MAHN;AAIRC,cAAQd;AAJA,KAAV;AAMD,GAtBD,EAsBG,IAtBH;;AAwBA,SAAOJ,IAAP;AACD;;AAED,SAASmB,YAAT,CAAsBpB,MAAtB,EAA8B;AAC5B,QAAMqB,aAAatB,aAAaC,MAAb,CAAnB;AACAqB,aAAWjB,OAAX,CAAmBkB,SAAS;AAC1B,UAAMC,UAAU,yBAAUD,MAAMH,MAAhB,EAAwB;AACtCI,eAAS,CAAC,QAAD,EAAW,MAAX,EAAmB,aAAnB,CAD6B;AAEtCC,mBAAa,IAFyB;AAGtCC,sBAAgB,KAHsB;AAItCC,cAAQ;AACNd,gBAAQ;AACNe,iBAAO,QADD;AAENC,yBAAeC,QAAQ;AACrB,mBAAO,gBAAMC,KAAN,CAAYD,IAAZ,CAAP;AACD;AAJK,SADF;AAONpB,qBAAa;AACXmB,yBAAeC,QAAQ;AACrB,mBAAO,gBAAME,MAAN,CAAaF,IAAb,CAAP;AACD;AAHU;AAPP,OAJ8B;AAiBtCG,wBAAkBC,WAAW;AAC3B,eAAO,gBAAMC,IAAN,CAAWC,IAAX,CAAgBF,QAAQpB,WAAR,EAAhB,CAAP;AACD;AAnBqC,KAAxB,CAAhB;AAqBAuB,YAAQC,GAAR,CAAa,QAAO,gBAAMC,SAAN,CAAgBC,IAAhB,CAAqBjB,MAAML,GAA3B,CAAgC,cAAa,gBAAMuB,IAAN,CAAWlB,MAAMJ,MAAjB,CAAyB,EAA1F;AACAkB,YAAQC,GAAR,CAAYd,OAAZ;AACD,GAxBD,EAwBG,IAxBH;AAyBD;;QAEOxB,Y,GAAAA,Y;QAAcqB,Y,GAAAA,Y","file":"route-list.js","sourcesContent":["import columnify from 'columnify';\nimport chalk from 'chalk';\n\n// TODO: Access info via web interface\n\nfunction getRouteList(server) {\n  const list = [];\n  const tables = server.table();\n  tables.forEach(table => {\n    const routesTable = [];\n    table.table.forEach(element => {\n      // TODO: Show element.config.auth\n      let routeDescription;\n      try {\n        routeDescription = element.settings.description;\n      } catch (err) {\n        routeDescription = '';\n      }\n      routesTable.push({\n        method: element.method.toUpperCase(),\n        path: element.path,\n        description: routeDescription\n      });\n    }, this);\n    list.push({\n      id: table.info.id,\n      uri: table.info.uri,\n      labels: table.labels,\n      routes: routesTable\n    });\n  }, this);\n\n  return list;\n}\n\nfunction formatRoutes(server) {\n  const listRoutes = getRouteList(server);\n  listRoutes.forEach(route => {\n    const columns = columnify(route.routes, {\n      columns: ['method', 'path', 'description'],\n      showHeaders: true,\n      columnSplitter: ' | ',\n      config: {\n        method: {\n          align: 'center',\n          dataTransform: data => {\n            return chalk.green(data);\n          }\n        },\n        description: {\n          dataTransform: data => {\n            return chalk.yellow(data);\n          }\n        }\n      },\n      headingTransform: heading => {\n        return chalk.blue.bold(heading.toUpperCase());\n      }\n    });\n    console.log(`URI: ${chalk.underline.cyan(route.uri)} - Labels: ${chalk.gray(route.labels)}`);\n    console.log(columns);\n  }, this);\n}\n\nexport {getRouteList, formatRoutes};\n"]}